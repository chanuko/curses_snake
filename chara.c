#include <ncurses.h>
#include <string.h>
#include <locale.h>
#include "main.h"

typedef struct
{
  char c[64];
} NUM;
NUM num[64] = {
    {"11111100011000110001100011000111111"}, /*0*/
    {"00001000010000100001000010000100001"}, /*1*/
    {"01111000010000101111100001000011111"}, /*2*/
    {"01111000010000101111000010000111111"}, /*3*/
    {"10001100011000111111000010000100001"}, /*4*/
    {"11110100001000011110000010000111111"}, /*5*/
    {"11110100001000011110100011000111111"}, /*6*/
    {"01111000010000100001000010000100001"}, /*7*/
    {"11111100011000111111100011000111111"}, /*8*/
    {"11111100011000111111000010000111111"}, /*9*/
    {"111101101101111"},
    /*0*/                /*10*/
    {"001001001001001"}, /*1*/
    {"111001111100111"}, /*2*/
    {"111001111001111"}, /*3*/
    {"101101111001001"}, /*4*/
    {"111100111001111"}, /*5*/
    {"100100111101111"}, /*6*/
    {"111001001001001"}, /*7*/
    {"111101111101111"}, /*8*/
    {"111101111001001"}, /*9*/
    {"000010111111101010111011100000"},
    /*pt*/               /*20*/
    {"100100100100111"}, /*L*/
    {"010101111100011"}, /*e*/
    {"000111101101101"}, /*n*/
    {"000000101101010"}, /*v*/
    {"000000000000100"},
    /*.*/ /*25*/
    {"111100000000000001111000000000000001000000000"},
    /*title*/ /*26*/
    {"100010000000010010000100000000000001000000000"},
    {"100001000000010010000000000000000001000000000"},
    {"100001001110111001000001011000111001001001110"},
    {"100001010001010000111001100100000101010010001"},
    {"100001010001010000000101000100111101100011111"},
    {"100001010001010010000101000101000101010010000"},
    {"100010010001010010000101000101000101001010001"},
    {"111100001110001001111001000100111101000101110"} /*title*/ /*34*/
};
void draw_c(int ie, int je, int y, int x, int n)
{
  int i, j, k;
  k = 0;
  for (i = 0; i < ie; i++)
  {
    for (j = 0; j < je; j++)
    {
      if (num[n].c[k] == '1')
        attrset(COLOR_PAIR(4));
      else
        attrset(COLOR_PAIR(3));
      mvaddch(y + i, x + j * 2, 'a');
      mvaddch(y + i, x + j * 2 + 1, 'a');
      k++;
    }
  }
}

void chara(int n, char ch)
{
  int i, j, k;
  int p, q, m, tmp;
  int t, x, y;

  if (ch == 't')
  {
    for (i = 0; i < 9; i++)
      draw_c(1, 45, FLDS_Y + 2 + i, FLDS_X + 1, 26 + i);
  }
  else
  {
    switch (ch)
    {
    case 's':
      draw_c(5, 3, FLD_Y - 10, FLD_X + 2, 21);
      draw_c(5, 3, FLD_Y - 10, FLD_X + 8, 22);
      draw_c(5, 3, FLD_Y - 10, FLD_X + 15, 23);
      p = 11;
      q = 7;
      x = SCR_X;
      y = FLD_Y - 5;
      i = 5;
      j = 3;
      t = 10;
      break;
    case 'l':
      draw_c(5, 3, FLD_Y - 22, FLD_X + 2, 21);
      draw_c(5, 3, FLD_Y - 22, FLD_X + 8, 24);
      draw_c(5, 3, FLD_Y - 22, FLD_X + 15, 25);
      p = 11;
      q = 7;
      x = SCR_X;
      y = FLD_Y - 17;
      i = 5;
      j = 3;
      t = 10;
      break;
    case 'p':
      draw_c(5, 6, SUBS_Y + 3, SCR_X - 17, 20);
      p = 29;
      q = 11;
      x = SCR_X;
      y = SUBS_Y + 1;
      i = 7;
      j = 5;
      t = 0;
      break;
    }
    m = n;
    while (m != 0)
    {
      tmp = m % 10;
      m /= 10;
      draw_c(i, j, y, x - p, tmp + t);
      p += q;
    }
  }
  refresh();
  return;
}
